<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Academic Calendar Generation</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
    <link rel="stylesheet" href="style.css" />
	<!-- CSS for full calender -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.min.css" rel="stylesheet" />
	<!-- JS for jQuery -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<!-- JS for full calender -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.min.js"></script>
	<!-- bootstrap css and js -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>


	<style>

		#calendar
		{
			width: 1500px;
		}
		/* Custom CSS for FullCalendar */
.fc-header-toolbar {
  background-color: #4c6aaf; /* Header background color */
  color: #fff; /* Header text color */
  padding: 10px;
}

.fc-header-toolbar button {
  background-color: transparent; /* Transparent background for buttons */
  color: #fff; /* Button text color */
  border: none; /* Remove button border */
}

.fc-day-header {
  background-color: #1d7ec4; 
  color: #d02f2f; /* Day header text color */
  font-weight: bold; /* Day header text bold */
}

.fc-daygrid-day {
  border: 2px solid #2d31aa; /* Border color for day cells */
}

.fc-today {
  background-color: #16b99e; /* Background color for today's date */
}

.fc-h-event {
  margin: 2px; /* Margin for event elements */
}

.fc-more-popover .fc-daygrid-event {
  margin: 1px; /* Margin for more popover event elements */
}
.fc-daygrid-day-number {
  text-align: center; /* Center align the date numbers */
}
#calendar {
  border: 1px solid #1b149f; /* Add a 1px solid border with a light gray color */
  border-radius: 5px; /* Optional: Add border radius for rounded corners */
}

	  </style> 
  </head>
  <body>
    <header class="header">
      <nav class="nav">
        <a href="#" class="nav_logo">Academic Calendar</a>
        <ul class="nav_items">
          <li class="nav_item">
            <a href="#" class="nav_link">Home</a>
            <a href="#" class="nav_link">Calendar</a>
            <a href="contact_us.html" class="nav_link">Contact</a>
          </li>
        </ul>
      </nav>
    </header>

    <section class="home">
    </section>

	<div id="calendar"></div>

<form action="generate_pdf.php" method="post" class="myform">
	<div class="pdf"><center><input type="submit" value="Genrate PDF" id="btn"/></center></div>
</form>

	<!-- Start popup dialog box -->
<div class="modal fade" id="event_entry_modal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
	<div class="modal-dialog modal-md" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="modalLabel">Add New Event</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">Ã—</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="img-container">
					<div class="row">
						<div class="col-sm-12">  
							<div class="form-group">
							  <label for="event_name">Event name</label>
							  <input type="text" name="event_name" id="event_name" class="form-control" placeholder="Enter your event name">
							</div>
						</div>
					</div>
					
					<div class="row">
						<div class="col-sm-6">  
							<div class="form-group">
							  <label for="event_start_date">Event start</label>
							  <input type="date" name="event_start_date" id="event_start_date" class="form-control onlydatepicker" placeholder="Event start date">
							 </div>
						</div>
						<div class="col-sm-6">  
							<div class="form-group">
							  <label for="event_end_date">Event end</label>
							  <input type="date" name="event_end_date" id="event_end_date" class="form-control" placeholder="Event end date">
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" onclick="save_event()">Save Event</button>
				<button type="button" class="btn btn-primary" onclick="update_event()">Update Event</button>
				<button type="button" class="btn btn-primary" onclick="delete_event()">Delete Event</button>
			</div>
		</div>
	</div>
</div>
<!-- End popup dialog box -->

       <footer>
       <div class="row">
        <div class="col">
            <p>
                Academic Calender framework for organising and managing the Academic year,ensuring that students,teachers
                and staff are all aware of important dates and events.
            </p>
        </div>
        <div class="col">
            <h3>office</h3>
            <p>MIDC Road</p>
            <p>Sainik Vasahat,Miraj</p>
            <p>Sangli,PIN 416410, India</p>
            <p class="email-id">shrutika8846@gmail.com</p>
            <h6>+91 8329685511</h6>
        </div>
        <div class="col">
            <h3>Links</h3>
            <ul>
                <li><a href="">Home</a></li>
                <li><a href="">Event Calendar</a></li>
                <li><a href="">Contact us</a></li>
                <li><a href="">managing you Academics</a></li>
            </ul>
        </div>
        <div class="col">
            <h3>Newsletter</h3>
            <form >
                <i class="fa-regular fa-envelope"></i>
                <input type="email" placeholder="  Enter your Email Id" required>
                <button type="submit"><i class="fa-solid fa-arrow-right"></i></i></button>
            </form>
            <div class="social-icons">
                <i class="fa-brands fa-facebook"></i>
                <i class="fa-brands fa-twitter"></i>
                <i class="fa-brands fa-instagram"></i>
                <i class="fa-brands fa-whatsapp"></i>
            </div>
        </div>
       </div>
       <hr>
       <p class="copyright"> &#169 Copyright- All Rights Reserved</p>
    </footer>
  </body>

  <script>
	$(document).ready(function() {
	display_events();
	}); 

function display_events() {
	var events = new Array();
$.ajax({
    url: 'display_event.php',  
    dataType: 'json',
    success: function (response) {
         
    var result=response.data;
    $.each(result, function (i, item) {
    	events.push({
            event_id: result[i].event_id,
            title: result[i].title,
            start: result[i].start,
            end: result[i].end,
            color: result[i].color,
        }); 	
    })
	var calendar = $('#calendar').fullCalendar({
	    defaultView: 'month',
		 timeZone: 'local',
	    editable: true,
        selectable: true,
		selectHelper: true,
        select: function(start, end) {
				//alert(start);
				//alert(end);
				$('#event_start_date').val(moment(start).format('YYYY-MM-DD'));
				$('#event_end_date').val(moment(end).format('YYYY-MM-DD'));
				$('#event_entry_modal').modal('show');
			},
        events: events,
	    eventRender: function(event, element, view) { 
            element.bind('click', function() {
					alert(event.event_id);
				});
    	}
		}); //end fullCalendar block	
	  },//end success block
	  error: function (xhr, status) {
	  alert(response.msg);
	  }
	});//end ajax block	
}

function save_event()
{
	var event_name=$("#event_name").val();
	var event_start_date=$("#event_start_date").val();
	var event_end_date=$("#event_end_date").val();
	if(event_name=="" || event_start_date=="" || event_end_date=="")
	{
		alert("Please enter all required details.");
		return false;
	}
$.ajax({
	url:"save_event.php",
	type:"POST",
	dataType: 'json',
	data: {event_name:event_name,event_start_date:event_start_date,event_end_date:event_end_date},
	success:function(response){
   $('#event_entry_modal').modal('hide');  
   if(response.status == true)
   {
	alert(response.msg);
	location.reload();
   }
   else
   {
	 alert(response.msg);
   }
  },
  error: function (xhr, status) {
  console.log('ajax error = ' + xhr.statusText);
  alert(response.msg);
  }
});    
return false;
}


	function update_event()
	{
	var event_name=$("#event_name").val();
	var event_start_date=$("#event_start_date").val();
	var event_end_date=$("#event_end_date").val();
	if(event_name=="" || event_start_date=="" || event_end_date=="")
	{
	alert("Please enter all required details.");
	return false;
	}
	$.ajax({
	 url:"update_event.php",
	 type:"POST",
	 dataType: 'json',
	 data: {event_name:event_name,event_start_date:event_start_date,event_end_date:event_end_date},
	 success:function(response){
	   $('#event_entry_modal').modal('hide');  
	   if(response.status == true)
	   {
		alert(response.msg);
		location.reload();
	   }
	   else
	   {
		 alert(response.msg);
	   }
	  },
	  error: function (xhr, status) {
	  console.log('ajax error = ' + xhr.statusText);
	  alert(response.msg);
	  }
	});    
	return false;
	}


	function delete_event()
	{
	var event_name=$("#event_name").val();
	var event_start_date=$("#event_start_date").val();
	var event_end_date=$("#event_end_date").val();
	if(event_name=="" || event_start_date=="" || event_end_date=="")
	{
	alert("Please enter all required details.");
	return false;
	}
	$.ajax({
	 url:"delete_event.php",
	 type:"POST",
	 dataType: 'json',
	 data: {event_name:event_name,event_start_date:event_start_date,event_end_date:event_end_date},
	 success:function(response){
	   $('#event_entry_modal').modal('hide');  
	   if(response.status == true)
	   {
		alert(response.msg);
		location.reload();
	   }
	   else
	   {
		 alert(response.msg);
	   }
	  },
	  error: function (xhr, status) {
	  console.log('ajax error = ' + xhr.statusText);
	  alert(response.msg);
	  }
	});    
	return false;
	}
	</script>
</html>
